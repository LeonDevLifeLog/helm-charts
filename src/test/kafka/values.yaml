
replicaCount: 3

image:
  registry: ""
  repository: "spwangxp/kafka"
  ##kubesphere/kafka
  ##Overrides the image tag whose default is the chart appVersion.
  tag: "2.6.0-0.1.0"
  pullPolicy: IfNotPresent

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

zookeeper:
  ## when enabled set true, it will use internal zookeeper chart
  ## use exist zk, please set false and write externalZk: zk1_ip:port1,zk2_ip:port2/path
  enabled: true
  externalZk: ""
  auth:
    ## Enable Zookeeper auth
    enabled: false

cfg:
  num_partitions: "1"
  replica_lag_time_max_ms: "10000"
  group_max_session_timeout_ms: "1800000"
  group_min_session_timeout_ms: "6000"
  auto_create_topics_enable: true
  compression_type: "producer"
  default_replication_factor: "1"
  delete_topic_enable: true
  log_cleaner_enable: true
  log_cleanup_policy: "delete"
  log_roll_hours: "168"
  message_max_bytes: "1073741823"
  num_replica_fetchers: "1"
  offsets_topic_replication_factor: "1"
  queued_max_requests: "500"
  unclean_leader_election_enable: false
  num_network_threads: "3"
  num_io_threads: "8"
  socket_send_buffer_bytes: "102400"
  socket_receive_buffer_bytes: "102400"
  socket_request_max_bytes: "104857600"
  num_recovery_threads_per_data_dir: "1"
  transaction_state_log_replication_factor: "1"
  transaction_state_log_min_isr: "1"
  log_flush_interval_messages: "10000"
  log_flush_interval_ms: "1000"
  log_retention_hours: "168"
  log_retention_bytes: "1073741824"
  log_segment_bytes: "1073741824"
  log_retention_check_interval_ms: "300000"
  zookeeper_connection_timeout_ms: "6000"
  group_initial_rebalance_delay_ms: "300000"

## Kafka's Java Heap size
##
heapOpts: "-Xmx1024m -Xms1024m"

## broekr jmx, default port: 9999
## custom JMX_PORT will cover default value
jmx:
  port: 9999

## Cluster Manager for Apache Kafka, previously known as Kafka Manager
cmak:
  enabled: true
  image: "spwangxp/cmak:3.0.0.5"
  ## the service default port 9000
  externalPort: 9000
  auth:
    ## enable cmak login auth, defalut false
    enabled: false
    ## cmak login default user
    user: admin
    ## cmak login default password
    password: password


serviceAccount:
  # Specifies whether a service account should be created
  create: false
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

podAnnotations: {}

## Add labels to all the deployed resources
##
commonLabels: {}

## Add annotations to all the deployed resources
##
commonAnnotations: {}

podSecurityContext: {}
  # fsGroup: 1000

securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

## Kafka containers' liveness and readiness probes. Evaluated as a template.
## ref: https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#container-probes
##
livenessProbe:
  enabled: true
  initialDelaySeconds: 10
  timeoutSeconds: 5
  # failureThreshold: 3
  # periodSeconds: 10
  # successThreshold: 1
readinessProbe:
  enabled: true
  initialDelaySeconds: 5
  failureThreshold: 6
  timeoutSeconds: 5
  # periodSeconds: 10
  # successThreshold: 1

## StrategyType, can be set to RollingUpdate or OnDelete by default.
## ref: https://kubernetes.io/docs/tutorials/stateful-application/basic-stateful-set/#updating-statefulsets
##
updateStrategy: RollingUpdate

## Partition update strategy
## https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/#partitions
##
# rollingUpdatePartition:

## Name of the priority class to be used by kafka pods, priority class needs to be created beforehand
## Ref: https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption/
##
priorityClassName: ""

## Affinity for pod assignment. Evaluated as a template
## Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity
##
affinity: {}

## Node labels for pod assignment. Evaluated as a template
## ref: https://kubernetes.io/docs/user-guide/node-selection/
##
nodeSelector: {}

## Tolerations for pod assignment. Evaluated as a template
## Ref: https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/
##
tolerations: []

## Service parameters
##
service:
  ## Service type
  ##
  type: ClusterIP
  ## Kafka port for client connections
  ##
  internalPort: 9092
  ## Kafka port for inter-broker connections
  ##
  externalPort: 9093
  ## Kafka port for external connections
  ##
  annotations: {}

## External Access to Kafka brokers configuration
##
externalAccess:
  ## Enable Kubernetes external cluster access to Kafka brokers
  ## Not finished
  enabled: false

ingress:
  enabled: false
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  hosts:
    - host: chart-example.local
      paths: []
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

resources: {}
  # We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube. If you do want to specify resources, uncomment the following
  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

## Persistence paramaters
##
persistence:
  enabled: true
  ## A manually managed Persistent Volume and Claim
  ## If defined, PVC must be created manually before volume will be bound
  ## The value is evaluated as a template
  ##
  # existingClaim:
  ## PV Storage Class
  ## If defined, storageClassName: <storageClass>
  ## If set to "-", storageClassName: "", which disables dynamic provisioning
  ## If undefined (the default) or set to null, no storageClassName spec is
  ## set, choosing the default provisioner.
  ##
  # storageClass: "-"
  ## PV Access Mode
  ##
  accessModes:
    - ReadWriteOnce
  ## PVC size
  ##
  size: 8Gi
  ## PVC annotations
  ##
  annotations: {}
